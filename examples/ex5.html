<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Examples | Involt </title>
	<meta content="Tutorials and examples for Involt framework. Every tutorial explains basic features for creating app and communication with arduino.">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" type="image/png" href="../favicon.png"/>
	<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,700|Source+Code+Pro:300' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="../css/style.css">	
	<!--<script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.5/less.min.js"></script>-->
	<script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
</head>
<body>
	<header class="nav-bg">
		<div class="navbar">
			<div class="logo"><a href="../index.html"><img src="../img/logo.svg" ></a></div>
			<div class="ham-btn">
				<div>
					<span></span>
					<span></span>
					<span></span>
				</div>
			</div>
			<div class="menu-screen">
				<a href="../index.html">Home</a>
				<a href="../gettingstarted.html">Getting started</a>
				<a href="../examples.html">Examples</a>
				<a href="../reference.html">Reference</a>
				<a href="https://github.com/Involt/Involt">Github</a>
			</div>
		</div>
		<div class="menu-mobile">
			<a href="../index.html">Home</a>
			<a href="../gettingstarted.html">Getting started</a>
			<a href="../examples.html">Examples</a>
			<a href="../reference.html">Reference</a>
			<a href="https://github.com/Involt/Involt">Github</a>
		</div>
	</header>
	
	
	<div class="container textmain">
		<div class="content">
			<div class="subtitle">How to read/send more variables or custom string.</div>
			<ol>
				<li>Send more variables to Arduino.
					<p>To send additional variable declare it as non existing pin. For example try to send value to Arduino UNO (with highest pin number 13) as pin P14. </p>
					<p>Remember about declaring them in <span class="sscode">chromeDigital[] array</span></p>
							<div class="codearea">
			<div class="helper">ARDUINO</div><br>
				//total number+1
				chromeDigital[15] = {};
			</div>
					<div class="codearea" style="font-weight:300;">
						<div class="helper">HTML</div><br>
						&lt;body&gt;<br />
						<p>&lt;div class="ard button P14 200"&gt;&lt;/div&gt;</p>
						&lt;/body&gt;
					</div>
					<p>Now you can access this value in chromeDigital array as <span class="sscode">chromeDigital[14]</span>. You can use this method to send values to shift register or expander.</p>
				</li>
				<li>How to send a custom string to Arduino.
					<p>Involt communication is based on variable/integer exchange by using serial. Even if data is transfered with string data - it is not possible to send the custom string directly.</p>
					<p> Here is example how data is sent from Involt to Arduino: </p>
					<div class="codearea" style="font-weight:300;"><br>
						//Send to pwm pin 5 value 255: <br><br>
						P5V255\n <br><br>
						//the "\n" is used for Serial.readStringUntil() inside sketch to stop the function from reading data.
					</div>
					<p>1. To store your string you need to define your custom string. </p>
					<div class="codearea" style="font-weight:300;">
						<div class="helper">ARDUINO</div><br>
						boolean directMode = false;<br><br>
						String customstring;
					</div>
					<p>2. You need to change the <span class="sscode">chromeReceive</span> function. Involt will save to <span class="sscode">customstring</span> when the received string will start from parameter. For this example add "S" letter as the parameter (you can also use this letter to store multiple variables in array with additional "if" statement. Then access them as S0,S1 etc.). </p>
					<div class="codearea" style="font-weight:300;">
						<div class="helper">ARDUINO</div><br>
						if(Serial.available() > 0){<br>
						<p> String chrome = Serial.readStringUntil('\n');<br>
							int chromeLen = chrome.length();<br>
							pin = chrome.substring(1,chrome.indexOf(V)).toInt();<br>
							String valRaw = chrome.substring(chrome.indexOf(V)+1,chromeLen);<br></p>
							<br>
							<div style="color:red;">if (chrome.indexOf("S") == 0){<br>
							<p>customstring = valRaw;</p>
						} <br></div>
						else{    <br> 
						<p>
							<div style="color:red;">
								<p>val = valRaw.toInt(); </p></div>
								<p>chromeDigital[pin]=val;</p>
								</p>
							} <br>
							<br>
						}
					</div>
					<p>To save your customstring as "involt" you need to send:</p>
					<div class="codearea" style="font-weight:300;">
						S0Vinvolt
					</div>
					<p>3. Now test this function with connected led to pin 5: </p>
					<div class="codearea" style="font-weight:300;">
						<div class="helper">ARDUINO</div><br>
						//Add this to void loop section <br><br>
						 if (customstring == "involt"){ <br>
    						<p>analogWrite(5, 255);</p> <br>
  						}
					</div>
					<p>4. To test you can send the string via serial monitor or use Involt:</p>
					<div class="codearea" style="font-weight:300;">
						<div class="helper">HTML</div><br>
						&lt;body&gt;<br />
						<p>&lt;div class="ard button S0 involt"&gt;&lt;/div&gt;</p>
						&lt;/body&gt;
					</div>
					<p>... or create input and type "involt":</p>
					<div class="codearea" style="font-weight:300;">
						<div class="helper">HTML</div><br>
						&lt;body&gt;<br />
						<p>&lt;input class="ard input-write S0"&gt;</p>
						&lt;/body&gt;
					</div>
					<p>... or use JQuery:</p>
					<div class="codearea" style="font-weight:300;">
						<div class="helper">JS</div><br>
							$(".yourbutton").click(function() {
							<p>arduinoSend("S0", "involt");</p>
						});
					</div>
		</li>
		<li>Read more variables from Arduino.
			<p>To read data from multiplexers, I2C devices like gyro or from other hardware there are two ways to do this. First of all take a look at the example of data sent to Involt:</p>
			<div class="codearea" style="font-weight:300;"><br>
				//Analog pin 0 value 825: <br><br>
				A0V825E
			</div>
			<p>1. Use the current <span class="sscode">chromeSend([pin], [value])</span> function to send values. The [pin] is analog pin index. Send the data as additional analog pin to use it inside your App. For example add 16 values of CD74HC4067 analog multiplexer as analog pins from A6 to A22 (for UNO) and access them in Involt. </p>
			<p>2. Another way is to create custom Serial.println string: </p>
			<div class="codearea" style="font-weight:300;">
				Serial.println(A+[pin]+V+[value]+E);
			</div>
		</li>
		<li>How to read a custom string from Arduino.
			<p>The data sent to Involt is a string. The easiest way to do this is to create the same custom Serial.println and then access the string with analogPins array inside Involt. </p>
			<div class="codearea" style="font-weight:300;">
				Serial.println(A+[pin]+V+<span style="color:red;">[String]</span>+E); 
			</div>
			<p>The more functional way is to add a new chromeSend function:</p>
			<div class="codearea" style="font-weight:300;"><br>
				void chromeSendString(int pinNumber, <span style="color:red;">String</span> sendValue){ <br>
				<p> String A = "A"; <br>
					String E = "E"; <br>
					Serial.println(A+pinNumber+V+sendValue+E); <br></p>
				} <br><br>
			</div>
			<p>It is possible to send custom string outside Involt but this require knowledge about Chrome serial API. You can also edit the onReceive function inside involt.js. </p>
		</li>
	</ol>
</div>
</div>

<footer class="container">
	<div class="content">
		<div class="columns">
			<img src="../img/ico1.svg" alt="involt" class="ico">
			<p class="foot">Involt is ready to use Chrome packaged app template. You can use it to quickly create interactive object with software to hardware communication. It is aimed for UX/product designers rather than professional coders.
			</p>
			<a href="#" class="bold">Return to top</a>
		</div>
		<div class="columns">
			<img src="../img/ico2.svg" alt="git" class="ico">
			<p class="foot">You can help develop this framework or  <a href="https://github.com/Involt/Involt" class="bold">fork project on Github</a>. To see the progress of developement you can check the changelog. <br>Involt is under MIT license.</p>

			<a href="https://github.com/Involt/Involt/wiki/Changelog" class="bold">See the changelog</a>
		</div>
		<div class="columns">
			<img src="../img/ico3.svg" alt="contact the author" class="ico">
			<p class="foot">
				Used Involt and enjoyed it? Do you have any questions or suggestions? You can help by sending feedback directly via mail.
			</p>
			<a href="mailto:ernestwarzocha@gmail.com" class="bold">ernestwarzocha@gmail.com</a>
		</div>
	</div>
	<br style="clear:both">
</footer>
<script src="js/jq.js"></script>
</body>
</html>